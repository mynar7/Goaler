(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{137:function(e,t,a){e.exports=a(335)},142:function(e,t,a){},160:function(e,t,a){},219:function(e,t,a){},245:function(e,t,a){},324:function(e,t,a){},326:function(e,t,a){},329:function(e,t,a){},335:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(20),i=a.n(o),s=(a(142),a(74)),c=a.n(s),l=a(116),u=a(18),m=a(21),h=a(24),d=a(22),p=a(23),g=a(53),f=r.a.createContext(null),b=function(e){return function(t){return r.a.createElement(f.Consumer,null,function(a){return r.a.createElement(e,Object.assign({},t,{firebase:a}))})}},E=f,O=a(41),j=a.n(O),v=(a(153),a(155),{apiKey:"AIzaSyD-JApoTn3FGcYz4dBjO48jQ5nMOQHiRZc",authDomain:"goaler-8f0dc.firebaseapp.com",databaseURL:"https://goaler-8f0dc.firebaseio.com",projectId:"goaler-8f0dc",storageBucket:"goaler-8f0dc.appspot.com",messagingSenderId:"564932997783"}),w=function e(){var t=this;Object(u.a)(this,e),this.signIn=function(){var e=new O.auth.GoogleAuthProvider;return t.auth.signInWithRedirect(e).catch(function(e){return console.log(e)})},this.logout=function(){return t.auth.signOut()},this.redirect=function(){return t.auth.getRedirectResult()},this.initializeUser=function(e){t.goalsRef=t.db.collection("users/".concat(e,"/goals"))},j.a.initializeApp(v),this.auth=j.a.auth(),this.db=j.a.firestore();this.db.settings({timestampsInSnapshots:!0}),this.goalsRef=null},y=a(339),k=a(338),M=a(337),C=function(e){function t(){return Object(u.a)(this,t),Object(h.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){console.log(this.props),this.props.user&&this.props.history.push("/")}},{key:"render",value:function(){return r.a.createElement("h2",null,"Login works!")}}]),t}(n.Component),D=(a(160),a(117)),x=a.n(D),S=function(e){function t(){return Object(u.a)(this,t),Object(h.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,this.props.status?r.a.createElement("div",{className:"loading"},r.a.createElement(x.a,{color:"secondary",size:200})):this.props.children)}}]),t}(n.Component),I=a(336),T=a(119),H=a.n(T),N=a(120),P=a.n(N),A=a(37),R=a.n(A),z=a(29),G=a.n(z),W=a(121),B=a.n(W),F=(a(219),function(e){function t(){return Object(u.a)(this,t),Object(h.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return r.a.createElement("header",{className:"header"},r.a.createElement(H.a,{position:"static"},r.a.createElement(P.a,{className:"row"},r.a.createElement(I.a,{to:"/"},r.a.createElement(G.a,{color:"inherit","aria-label":"Menu"},r.a.createElement(B.a,null),r.a.createElement(R.a,{variant:"h6",color:"inherit"},"Goaler"))),r.a.createElement("div",null,this.props.user?r.a.createElement(G.a,{color:"inherit",onClick:this.props.logout},"Sign Out"):r.a.createElement(G.a,{color:"inherit",onClick:this.props.login},"Sign In")))))}}]),t}(n.Component)),L=a(122),U=a(40),J=a(131),Y=a.n(J),Q=a(132),K=a.n(Q),V=a(75),Z=a(76),$=a(51),q=a(42),X=a.n(q),_=a(125),ee=a.n(_),te=a(123),ae=a.n(te),ne=a(130),re=a.n(ne),oe=a(129),ie=a.n(oe),se=a(124),ce=a.n(se),le=a(127),ue=a.n(le),me=a(128),he=a.n(me),de=a(126),pe=a.n(de),ge=a(54),fe=a.n(ge),be=a(28),Ee=(a(245),function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(h.a)(this,Object(d.a)(t).call(this,e))).handleChange=function(e){return function(t){a.setState(Object($.a)({},e,t.target.value))}},a.validate=function(){var e=!1,t="",n=!1,r="",o=!1,i="";a.state.name||(e=!0,t="Please set a goal"),a.state.date||(n=!0,r="Please set a date"),a.state.time||(o=!0,i="Please set a time");var s=new Date,c="".concat(a.state.date," ").concat(a.state.time).split(/[- :]/).map(function(e){return Number(e)});c[1]--;var l=Object(V.a)(Date,Object(Z.a)(c));return l.getTime()<s.getTime()&&(l.toDateString()!==s.toDateString()?(n=!0,r="Date must be in future"):(o=!0,i="Time must be in future")),a.setState({nameErr:e,nameHelper:t,dateErr:n,dateHelper:r,timeErr:o,timeHelper:i}),!!(o||n||e)},a.handleSubmit=function(){if(!a.validate()){var e="".concat(a.state.date," ").concat(a.state.time).split(/[- :]/).map(function(e){return Number(e)});e[1]--;var t=Object(V.a)(Date,Object(Z.a)(e));a.props.firebase.goalsRef.add({goal:a.state.name,date:t.getTime()}).then(function(){a.props.closeModal()})}},console.log(e),a.now=new Date,a.today="".concat(a.now.getFullYear(),"-").concat(a.now.getMonth()+1,"-").concat(a.now.getDate()),a.maxDate="".concat(a.now.getFullYear()+10,"-").concat(a.now.getMonth()+1,"-").concat(a.now.getDate()),a.currentTime="".concat(a.now.getHours()<10?"0"+a.now.getHours():a.now.getHours(),":").concat(a.now.getMinutes()+1<10?"0"+(a.now.getMinutes()+1):a.now.getMinutes()+1),a.state={name:"",nameErr:!1,nameHelper:"",date:a.today,dateErr:!1,dateHelper:"",time:a.currentTime,timeErr:!1,timeHelper:""},a}return Object(p.a)(t,e),Object(m.a)(t,[{key:"componentDidUpdate",value:function(e,t){t.name===this.state.name&&t.date===this.state.date&&t.time===this.state.time||this.validate()}},{key:"render",value:function(){return r.a.createElement(ae.a,{className:"goalform"},r.a.createElement(ce.a,{avatar:r.a.createElement(ee.a,{style:{backgroundColor:this.props.theme.palette.secondary.main,color:this.props.theme.palette.text.primary}},r.a.createElement(pe.a,null)),title:"Add a goal",action:r.a.createElement(ue.a,{onClick:this.props.closeModal,tabIndex:-1},r.a.createElement(he.a,null))}),r.a.createElement(ie.a,null,r.a.createElement(X.a,{container:!0,spacing:0},r.a.createElement(X.a,{item:!0,xs:12},r.a.createElement(fe.a,{label:"Goal",placeholder:"Make it a good one!",error:this.state.nameErr,value:this.state.name,onChange:this.handleChange("name"),fullWidth:!0,margin:"normal",helperText:this.state.nameHelper})),r.a.createElement(X.a,{item:!0,xs:12,md:6},r.a.createElement(fe.a,{label:"Due Date",error:this.state.dateErr,type:"date",value:this.state.date,onChange:this.handleChange("date"),margin:"normal",fullWidth:!0,InputLabelProps:{shrink:!0},helperText:this.state.dateHelper,InputProps:{inputProps:{min:this.today,max:this.maxDate}}})),r.a.createElement(X.a,{item:!0,xs:12,md:6},r.a.createElement(fe.a,{label:"Due Time",error:this.state.timeErr,type:"time",value:this.state.time,onChange:this.handleChange("time"),margin:"normal",fullWidth:!0,helperText:this.state.timeHelper,InputLabelProps:{shrink:!0}})))),r.a.createElement(re.a,{className:"row right"},r.a.createElement(G.a,{onClick:this.handleSubmit},"Add Goal"),r.a.createElement(G.a,{onClick:this.props.closeModal},"Close")))}}]),t}(n.Component)),Oe=Object(be.withTheme)()(b(Ee)),je=a(73),ve=a.n(je),we=(a(324),function(e){var t=e.children,a=Object(g.a)(e,["children"]);return r.a.createElement(ve.a,Object.assign({},a,{className:"centeredModal"}),t)}),ye=(a(326),b(function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(h.a)(this,Object(d.a)(t).call(this,e))).componentDidMount=function(){Object(U.a)(Object(U.a)(a));a.props.firebase.db.collection("users/".concat(a.props.user.uid,"/goals")).onSnapshot(function(e){var t=[];e.forEach(function(e){return t.push(Object(L.a)({id:e.id},e.data()))}),a.setState({goals:t})})},a.toggleModal=function(){a.setState({goalModalOpen:!a.state.goalModalOpen})},a.state={goalModalOpen:!1,goals:[]},a}return Object(p.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"dash"},this.state.goals.map(function(e){return r.a.createElement(R.a,{key:e.id,variant:"h6",align:"center"},"".concat(e.goal,", ").concat(e.date,", ").concat(e.id))}),r.a.createElement(we,{open:this.state.goalModalOpen,onClose:this.toggleModal},r.a.createElement(Oe,{closeModal:this.toggleModal})),r.a.createElement(Y.a,{color:"secondary",variant:"extended","aria-label":"Add",id:"dash-addBtn",onClick:this.toggleModal},r.a.createElement(K.a,null)))}}]),t}(r.a.Component))),ke=(a(329),function(e){var t=e.component,a=e.user,n=Object(g.a)(e,["component","user"]);return r.a.createElement(y.a,Object.assign({},n,{render:function(e){return a?r.a.createElement(t,Object.assign({},e,n,{user:a})):r.a.createElement(k.a,{to:{pathname:"/login",state:{from:e.location}}})}}))}),Me=b(function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(h.a)(this,Object(d.a)(t).call(this,e))).componentDidMount=function(){a.props.firebase.auth.onAuthStateChanged(function(e){e?(a.setState({user:e,loading:!1}),a.props.firebase.initializeUser(e.uid)):a.setState({user:null,loading:!1})})},a.signIn=Object(l.a)(c.a.mark(function e(){var t;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.props.firebase.signIn();case 2:t=e.sent,a.setState({user:t.user});case 4:case"end":return e.stop()}},e,this)})),a.signOut=function(){a.props.firebase.logout()},a.state={user:null,loading:!0,from:null},a}return Object(p.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(M.a,{basename:"/Goaler"},r.a.createElement(S,{status:this.state.loading},r.a.createElement("div",{className:"App"},r.a.createElement(F,{user:this.state.user,login:this.signIn,logout:this.signOut}),r.a.createElement(y.a,{path:"/login",render:function(t){return r.a.createElement(C,Object.assign({},t,{user:e.state.user}))}}),r.a.createElement(ke,{user:this.state.user,exact:!0,path:"/",component:ye}))))}}]),t}(n.Component)),Ce=a(135),De=a.n(Ce),xe=a(133),Se=a.n(xe),Ie=a(134),Te=a.n(Ie),He=a(72),Ne=a.n(He),Pe=Object(be.createMuiTheme)({palette:{type:"dark",primary:{main:Se.a[900]},secondary:{main:Te.a[400]},error:Ne.a,contrastThreshold:3,tonalOffset:.5},typography:{useNextVariants:!0}});a(332),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(E.Provider,{value:new w},r.a.createElement(be.MuiThemeProvider,{theme:Pe},r.a.createElement(De.a,null),r.a.createElement(Me,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[137,2,1]]]);
//# sourceMappingURL=main.e7632831.chunk.js.map